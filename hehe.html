<!DOCTYPE html>
<html>
<body>

<script>
  let totalWindows = 5; // Limit the number of windows
  let windows = []; // Store window references
  let imageUrl = "https://via.placeholder.com/100"; // Change this to your image URL

  function openBouncingWindow(index, x = 100, y = 100, dx = 5, dy = 5) {
    let myWindow = window.open("", `_blank`, `width=150,height=150,left=${x},top=${y}`);

    if (myWindow) {
      windows.push(myWindow); // Store reference

      myWindow.document.write(`
        <html>
          <head>
            <title>Bouncing Window ${index + 1}</title>
            <script>
              let x = ${x};
              let y = ${y};
              let dx = ${dx};
              let dy = ${dy};
              let gravity = 0.5;
              let bounceFactor = 0.8;
              let friction = 0.98;
              let screenW = window.screen.availWidth;
              let screenH = window.screen.availHeight;
              let winW = 150;
              let winH = 150;

              function moveWindow() {
                dy += gravity; // Apply gravity
                x += dx;
                y += dy;

                // Bounce off walls
                if (x + winW >= screenW || x <= 0) dx *= -1;

                // Bounce off floor
                if (y + winH >= screenH) {
                  y = screenH - winH; 
                  dy *= -bounceFactor; // Reverse velocity with dampening
                  dx *= friction; // Apply friction on impact
                }

                // Bounce off ceiling
                if (y <= 0) {
                  y = 0;
                  dy *= -bounceFactor;
                }

                window.moveTo(x, y);
              }

              setInterval(moveWindow, 30);
            <\/script>
          </head>
          <body style="margin:0; display:flex; justify-content:center; align-items:center; background:black;">
            <img src="${imageUrl}" style="width:100px; height:100px;">
          </body>
        </html>
      `);
      myWindow.document.close();
    } else {
      alert("Pop-ups are blocked! Allow pop-ups and try again.");
    }
  }

  // Open 5 bouncing windows
  for (let i = 0; i < totalWindows; i++) {
    let startX = Math.random() * (window.screen.availWidth - 150);
    let startY = Math.random() * (window.screen.availHeight / 2);
    let velocityX = (Math.random() > 0.5 ? 1 : -1) * (2 + Math.random() * 3);
    let velocityY = -(2 + Math.random() * 5); // Start with upward motion

    openBouncingWindow(i, startX, startY, velocityX, velocityY);
  }
</script>

</body>
</html>
